# bigmax4X
name provided by WootImNoob

This is an AI for Winter Wonderland that uses the last slot in your inventory to combine presents 2 tiers above themselves<br>
It does this by selling the first 2 presants obtained through combination and then buying them back to combine the final output

# Source import

This is the source code of the AI, it is imported inside the [external AI editor](https://d0sboots.github.io/perfect-tower/) and features lua macros and comments

```
{"workspaces":{"Woot, what did you have me create":[["woots combiner",":name Woots Combiner\n\n:const string coords '{lua(\\\n  local tester = table.pack(\\\n    565.0, \\\n    334.0, \\\n    583.0, \\\n    151.0, \\\n    515.0, \\\n    237.0, \\\n    557.0, \\\n    336.0, \\\n    584.0, \\\n    154.0, \\\n    569.0, \\\n    238.0, \\\n    572.0, \\\n    339.0, \\\n    584.0, \\\n    158.0, \\\n    619.0, \\\n    235.0, \\\n    722.0, \\\n    241.0, \\\n    677.0, \\\n    239.0, \\\n    511.0, \\\n    296.0, \\\n    562.0, \\\n    340.0, \\\n    580.0, \\\n    151.0, \\\n    512.0, \\\n    238.0, \\\n    567.0, \\\n    340.0, \\\n    581.0, \\\n    160.0, \\\n    566.0, \\\n    239.0, \\\n    562.0, \\\n    341.0, \\\n    585.0, \\\n    158.0, \\\n    619.0, \\\n    237.0, \\\n    715.0, \\\n    237.0, \\\n    673.0, \\\n    234.0, \\\n    514.0, \\\n    296.0, \\\n    573.0, \\\n    339.0, \\\n    587.0, \\\n    159.0, \\\n    509.0, \\\n    241.0, \\\n    573.0, \\\n    341.0, \\\n    583.0, \\\n    159.0, \\\n    570.0, \\\n    235.0, \\\n    573.0, \\\n    342.0, \\\n    585.0, \\\n    162.0, \\\n    616.0, \\\n    238.0, \\\n    718.0, \\\n    238.0, \\\n    673.0, \\\n    238.0, \\\n    622.0, \\\n    239.0, \\\n    745.0, \\\n    292.0, \\\n    587.0, \\\n    159.0, \\\n    566.0, \\\n    240.0, \\\n    829.0, \\\n    194.0, \\\n    829.0, \\\n    194.0, \\\n    650.0, \\\n    299.0, \\\n    585.0, \\\n    157.0, \\\n    515.0, \\\n    238.0, \\\n    741.0, \\\n    237.0, \\\n    680.0, \\\n    236.0, \\\n    584.0, \\\n    156.0, \\\n    790.0, \\\n    205.0\\\n  );\\\n  return table.concat(tester)\\\n)}'\n\nkey.x()\nkey.p()\n\n:global int inc\n:local vector point\n\ngotoif(skip, contains(impulse(), \"key.p\"))\ncanvas.clear()\n\nskip:\npoint = vec(\\\n  s2d(sub(coords, inc, 5), 0.0), \\\n  s2d(sub(coords, inc + 5, 5), 0.0)\\\n)\ninc = inc + 10\ncanvas.rect(point, vec(5.0, 5.0), \"#000\")\n\n"],["bigmax4X",":name bigmax4X\n:budget_cap 1\n\nkey.x()\n\nkey.i()\nkey.j()\n\n:const string gift_name '<size=0>gift coord'\n\n:const double gift_slot_1 460.0\n:const double gift_slot_2 580.0\n:const double gift_slot_3 700.0\n\n:const double gift_coord_y 300.0\n:const double rebuy_coord_y 250.0\n\n:const double gift_slot_increment 120.0\n\n:const double combine_slot_1 405.0\n:const double combine_slot_2 470.0\n:const double combine_slot_3 535.0\n\n:const double combine_slot_increment 65.0\n\n\n:local double buy_coord\n:local double combine_coord\n\n:local string gift_to_buy\n\n:global string buy_gift\n\nglobal.double.set(gift_name, max(gift_slot_1, min(gift_slot_3, if(\\\n  contains(impulse(), \"key.x\"),\\\n  global.double.get(gift_name),\\\n  if(\\\n    contains(impulse(), \"key.i\"), \\\n    global.double.get(gift_name) + gift_slot_increment, \\\n    global.double.get(gift_name) - gift_slot_increment\\\n  )\\\n))))\n\nbuy_coord = global.double.get(gift_name)\ncombine_coord = combine_slot_1\n\ngift_to_buy = if(buy_coord == gift_slot_1, \"red gift\", if(\\\n  buy_coord == gift_slot_2, \\\n  \"green gift\", \\\n  \"blue gift\"\\\n))\n\nbuy_gift = i2s(25 + len(gift_to_buy)) . \"</size>\" .\\\n  \"script will buy \" . gift_to_buy . if(\\\n    contains(buy_gift, \"<br>\"),\\\n    sub(buy_gift, s2i(sub(buy_gift, 0, 2), 0), 99),\\\n    \"\"\\\n)\\\n\n\ngotoif(99, contains(buy_gift, \"<br>\") || contains(\"key.ikey.j\", impulse()))\n\n:local int buy\n:local int combine\n\nbuy_gift = buy_gift . \"<br>combining with \" . \\\n  \"<color=#000>\" . gift_to_buy . \"</color>\"\n\nbuy_loop:\n\n{click.relative(buy_coord / 800.0, gift_coord_y / 450.0, 1.0, 0.5)}\n; buy selected gift\n{click.relative(490.0 / 800.0, 085.0 / 450.0, 1.0, 0.5)}\n; click on the inventory slot\n{click.relative(combine_coord / 800.0, 180.0 / 450.0, 1.0, 0.5)}\n; put it in slot\n\n; increment our buy count\n; this keeps track of how many items we have bought\nbuy = (buy + 1) % 3\n\n; we also change the location of our combine coord\n; since buy can only have 0 1 2, if buy isn't 1 nor 2\n; buy == 0, so we must restart to combine_slot_1\ncombine_coord = if(\\\n  buy == 1,\\\n  combine_slot_2,\\\n  if(buy == 2, combine_slot_3, combine_slot_1)\\\n)\ngotoif(buy_loop, buy > 0)\n\n{click.relative(680.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}\n; we click the button to combine the inbut,\n; at the cost of candy cane\n{click.relative(600.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}\n; we take the input inside of our combine slot \n\ngotoif(skip_sell, combine == 2)\n\n{click.relative(410.0 / 800.0, rebuy_coord_y / 450.0, 1.0, 0.5)}\n; and we sell it for to make space for the next combine sequence\n\nskip_sell:\ncombine = (combine + 1) % 3\ngotoif(buy_loop, combine > 0)\n\n{click.relative(combine_slot_3 / 800.0, 180.0 / 450.0, 1.0, 0.5)}\n; place our combined gift in the third combine slot\n\n{click.relative(695.0 / 800.0, rebuy_coord_y / 450.0, 1.0, 0.5)}\n; rebuy our second deleted gift\n{click.relative(490.0 / 800.0, 085.0 / 450.0, 1.0, 0.5)}\n; rebuying places the item back in our inventory in the last slot\n; so we have too click our inventory to sellect it\n{click.relative(combine_slot_2 / 800.0, 180.0 / 450.0, 1.0, 0.5)}\n; place our combined gift in the second combine slot\n\n{click.relative(785.0 / 800.0, 030.0 / 450.0, 1.0, 1.0)}\n; close the snowman store\nwaitframe()\n; wait a frame so our click goes through\n{click.relative(785.0 / 800.0, 030.0 / 450.0, 1.0, 1.0)}\n; reopen the snowman store\n\n{click.relative(565.0 / 800.0, rebuy_coord_y / 450.0, 1.0, 0.5)}\n; rebuy our first deleted item\n{click.relative(490.0 / 800.0, 085.0 / 450.0, 1.0, 0.5)}\n; click our inventory to grab our rebought item\n{click.relative(combine_coord / 800.0, 180.0 / 450.0, 1.0, 0.5)}\n; place it in our first combine slot\n\n{click.relative(680.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}\n; click the combine button\n{click.relative(600.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}\n; click on our combine result\n{click.relative(490.0 / 800.0, 085.0 / 450.0, 1.0, 0.5)}\n; place it in our inventory\n\n{click.relative(735.0 / 800.0, 140.0 / 450.0, 1.0, 0.5)}\n; and unwrap all presents\n\n; finally, to signal to the script that it's completed, we set\n; our instance_running to false\n\nend:\nbuy_gift = sub(buy_gift, 0, s2i(sub(buy_gift, 0, 2), 0))"],["Winter Wonderland vectors","\nclick(vec(460.0, 302.0)) ; buy gift 1\n; {pos.relative(460.0 / 800.0, 300.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(590.0, 302.0)) ; buy gift 2\n; {pos.relative(580.0 / 800.0, 300.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(710.0, 302.0)) ; buy gift 3\n; {pos.relative(700.0 / 800.0, 300.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(734.0, 141.0)) ; unbox all\n; {pos.relative(735.0 / 800.0, 140.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(491.0, 083.0)) ; inv slot last\n; {pos.relative(490.0 / 800.0, 085.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(405.0, 179.0)) ; Combine slot 1\n; {pos.relative(405.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(470.0, 178.0)) ; Combine slot 2\n; {pos.relative(470.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(536.0, 178.0)) ; Combine slot 3\n; {pos.relative(535.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(600.0, 179.0)) ; Combine slot result\n; {pos.relative(600.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(677.0, 179.0)) ; Combine button buy\n; {pos.relative(680.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(408.0, 248.0)) ; Sell slot\n; {pos.relative(410.0 / 800.0, 250.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(565.0, 252.0)) ; Rebuy slot 1\n; {pos.relative(565.0 / 800.0, 250.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(693.0, 251.0)) ; Rebuy slot 2\n; {pos.relative(695.0 / 800.0, 250.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(785.0, 030.0)) ; Click snowman\n; {pos.relative(785.0 / 800.0, 030.0 / 450.0, 1.0, 1.0)}\n"],["instruction maker","\n#open_bracket {\n#closed_bracket }\n\n{lua(\\\n  local vecs = table.pack(\\\n    \"gift_coord / 800.0, 300.0 / 450.0, 1.0, 0.5\", \\\n    \"735.0 / 800.0, 140.0 / 450.0, 1.0, 0.5\", \\\n    \"490.0 / 800.0, 085.0 / 450.0, 1.0, 0.5\", \\\n    \"combine_coord / 800.0, 180.0 / 450.0, 1.0, 0.5\", \\\n    \"600.0 / 800.0, 180.0 / 450.0, 1.0, 0.5\", \\\n    \"680.0 / 800.0, 180.0 / 450.0, 1.0, 0.5\", \\\n    \"410.0 / 800.0, 250.0 / 450.0, 1.0, 0.5\", \\\n    \"565.0 / 800.0, 250.0 / 450.0, 1.0, 0.5\", \\\n    \"695.0 / 800.0, 250.0 / 450.0, 1.0, 0.5\", \\\n    \"750.0 / 800.0, 030.0 / 450.0, 1.0, 0.5\"\\\n  );\\\n  local actions = table.pack(\\\n    \"buy x\",\\\n    \"unbox\",\\\n    \"inv\",\\\n    \"comb x\", \"comb res\", \"comb buy\", \\\n    \"sell\", \"rebuy 1\", \"rebuy 2\", \\\n    \"snowman\"\\\n  );\\\n  local instr = {};\\\n  for i, word in ipairs(actions) do\\\n    instr[word] = vecs[i];\\\n  end\\\n  \\\n  local instructions = table.pack(\\\n    \"buy x\", \"inv\", \"comb x\",\\\n    \"comb buy\", \"comb res\", \"sell\",\\\n    \"comb x\",\\\n    \"rebuy 2\", \"inv\", \"comb x\",\\\n    \"snowman\", \"snowman\",\\\n    \"rebuy 1\", \"inv\", \"comb x\",\\\n    \"comb buy\", \"comb res\", \"inv\", \"unbox\"\\\n  )\\\n  local printer = {};\\\n  for i, word in ipairs(instructions) do\\\n    printer[1 + #printer] = \"{open_bracket}\";\\\n    printer[1 + #printer] = \"click.relative(\";\\\n    printer[1 + #printer] = instr[word];\\\n    printer[1 + #printer] = \"){closed_bracket}\";\\\n    printer[1 + #printer] = '\\n';\\\n  end\\\n  return table.concat(printer);\\\n)}\n\n"],["check click positions","\nwakeup()\n\ncanvas.rect({pos.relative(460.0 / 800.0, 300.0 / 450.0, 1.0, 0.5)}, vec(5.0, 5.0), \"#000\")\ncanvas.rect({pos.relative(580.0 / 800.0, 300.0 / 450.0, 1.0, 0.5)}, vec(5.0, 5.0), \"#000\")\ncanvas.rect({pos.relative(700.0 / 800.0, 300.0 / 450.0, 1.0, 0.5)}, vec(5.0, 5.0), \"#000\")\ncanvas.rect({pos.relative(735.0 / 800.0, 140.0 / 450.0, 1.0, 0.5)}, vec(5.0, 5.0), \"#000\")\ncanvas.rect({pos.relative(490.0 / 800.0, 085.0 / 450.0, 1.0, 0.5)}, vec(5.0, 5.0), \"#000\")\ncanvas.rect({pos.relative(405.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}, vec(5.0, 5.0), \"#000\")\ncanvas.rect({pos.relative(470.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}, vec(5.0, 5.0), \"#000\")\ncanvas.rect({pos.relative(535.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}, vec(5.0, 5.0), \"#000\")\ncanvas.rect({pos.relative(600.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}, vec(5.0, 5.0), \"#000\")\ncanvas.rect({pos.relative(680.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}, vec(5.0, 5.0), \"#000\")\ncanvas.rect({pos.relative(410.0 / 800.0, 250.0 / 450.0, 1.0, 0.5)}, vec(5.0, 5.0), \"#000\")\ncanvas.rect({pos.relative(565.0 / 800.0, 250.0 / 450.0, 1.0, 0.5)}, vec(5.0, 5.0), \"#000\")\ncanvas.rect({pos.relative(695.0 / 800.0, 250.0 / 450.0, 1.0, 0.5)}, vec(5.0, 5.0), \"#000\")\ncanvas.rect({pos.relative(785.0 / 800.0, 030.0 / 450.0, 1.0, 1.0)}, vec(5.0, 5.0), \"#000\")\n"],["New 7",""]]}}
```

# AI import

```
7Vxbb+NEFP4rkXljU9dOCiuqNFvBH+AFCYl0iz2ZOLN1ZoI9pg3bStWuVrASDytWSAWEqHhbCSQeeAAJCcn+Y8iXJK4z4zi2E5rNSSTHdedybt+Zc85Y81RxkUPG3FUOP3uqGIgTRsN7pedpmq5bNjMNW+0zz7Sx6mLeMxGjLjcoDxtoB1GzVsclX+EjrWuRAW8gxpx+jyZ9RsZFpk87umqya3B9eTzvTeiKvW/9F8fRLebYoYYzSYiPng1c7hBqqYhRbhDqxg1jCahkNPZsF4s41N47wxP1QiQTawWZrIcsEpNlOIQPR5gTlBq6CrWiCfUHq6kjvj4+3iSJe+VIVJqxzWs2Q/kmz01vcjrTaAX6i0/pIDYyCcWnIr6XMPjxJMtbYm4SOGtmSOEpZ6emN7lrs3HHmGvERmPDIS6jaWXeZUUki5T0RJO3jo5K+IvsSKaD+42QjftPf8N/tkg/tRyMaczBIgG2h6N/TdU6tcAcvZoh1TOBvI8YRUbx+zZpJU4pBWFCs9O0Imo+EHAq8SVOQrGNqcWHAhOVgOmuiYoaPOzsh3DrCqGoxa61cU5su2F6k0bZmSXGJXToWS2JJphrSTT1Qcd0uj3uembajlcZNdKl2yKVBhHoXGjdonai1iXHQwXNTEtQomELU+wQpFqMMzIoMl6ky5SjMBmz165goVe5vBTPu+A4ooggvDzpCaKITXmMyrLQ26Es4lWPUKtxTviwsdBw0EHMZs7RO5qmdetyH2ZnPxq1GwrLmRoNsgk6i0X6JUbqwGGjj8JFIFG9JLQp/Dgd8E71hjFVz0mfD9W+rJtgpdFR8PUXs5vgn0di5/tuYk/xNENMrCFXJRFV3BazcZgdqB5RQ9ea03RFcVRec/X9MiGf/3Jx3fVKB5DBHxJBP1hFn9WMZkGbxa1mKXu/5tpRlr3qZpShMfj2k/ATvMiTskR0ha28jFxuH4GbqEW/qe+N/y9gaX1Y8q+7wRv/dTd4E7zOlTTgaXvwtI5lN7fqAEvvrriLG/+H2ffv++owYmMmlEvLWu1Zxp4pYoiepcaTJRFtWe1hoUga57S6gAXhuCOWFVBLJo/SFURPUorGqWy3qhwWS2FFBbFE859fyUv8m2BgeRVjCQP+X/511gMWruIuK2T0TMkYdYpGz9YppHUbWM5r8MEH7fATPIfAGFY6wFI1LReS9StA2s4jrchaG+3sSsYpsd4+TKK0quEIOIr6Ft1fwBWs1RXcBi/nSvd/u6cF3uX55Qy7Xn05Zq4/2HyeucnUI591SD/+B0/4PXjCnQ+KAEt17nRdA6IgtgBIwebx9kAKNo/fejwNok/wIyAJwj3AUjUtH0epk5/vKwFLVSOAn4KfZ9/f82WdFcP8nejE1M8NwgeOMcIAAADAjgAAzLzOHOQ7MHZI6wFSkNZvD6QgrX/78LS6OOCdcHAXULvYWYch3vaFt04BS4AleOsUkAZI2wKkQdoIaSPgqUY8vZrjyf8T8LROPMVU+M/3ghv/2V7wzT3FVLxdtsIRQps4b8rb4sOtlJOmghjtk+n5mydNJTmyKTqNMzp+UmlGvyT5fRJ2ouE25aFiEmtkXBx8qjSVsYHODCt8qDQV0+tbmCuHelPxXPxh8hd3PHx1cvUf
```

# Requirements
- 3 impulses
- 0 conditions
- 34 actions
- 1 script
- budget cap 1

To use this AI, you must be inside of winter wonderland, have the snowman menu open and have enough candy canes to buy and combine 27 gifts.

Be aware that using this will empty out the items you have sold, so if you're using those spaces for storage make sure you're happy to lose what's been sold before activating this AI.

By default, you will be buying `red gifts`, you can change this by pressing `i` to move 1 tier up or `j` to move 1 tier down<br>
There is a global string that tells you which gift you are buying.

Once you're happy with what it's buying, you press x to start the AI combiner.<br>
The display will update to tell you what gift you're combining. During this time, you can change the target if you want to try something else on the next run.

This is a 1 tile combiner. So, it's very sensitive and likely to break if not all conditions for using it are met.
- You must only have 1 free inventory slot available so that the click coordinates are accurate
- Your combine bar should be empty or else the AI could behave unexpectidely
- The setting Dynamic UI Scale must be turned off or else the relative vectors will break


