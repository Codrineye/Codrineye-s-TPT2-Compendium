# bigman4X
name provided by WootImNoob

This is an AI for Winter Wonderland that combine gifts 2 tiers above themselves by using 1 inventory slot.<br>
It does this by selling the first 2 gifts obtained through combination and then buying them back to combine the final output.

# Source import

This is the source code of the AI, it is imported inside the [external AI editor](https://d0sboots.github.io/perfect-tower/) which features lua macros and comments

```
{"workspaces":{"bigman4X":[["woots combiner",":name Woots Combiner\n\n:const string coords '{lua(\\\n  local tester = table.pack(\\\n    565.0, \\\n    334.0, \\\n    583.0, \\\n    151.0, \\\n    515.0, \\\n    237.0, \\\n    557.0, \\\n    336.0, \\\n    584.0, \\\n    154.0, \\\n    569.0, \\\n    238.0, \\\n    572.0, \\\n    339.0, \\\n    584.0, \\\n    158.0, \\\n    619.0, \\\n    235.0, \\\n    722.0, \\\n    241.0, \\\n    677.0, \\\n    239.0, \\\n    511.0, \\\n    296.0, \\\n    562.0, \\\n    340.0, \\\n    580.0, \\\n    151.0, \\\n    512.0, \\\n    238.0, \\\n    567.0, \\\n    340.0, \\\n    581.0, \\\n    160.0, \\\n    566.0, \\\n    239.0, \\\n    562.0, \\\n    341.0, \\\n    585.0, \\\n    158.0, \\\n    619.0, \\\n    237.0, \\\n    715.0, \\\n    237.0, \\\n    673.0, \\\n    234.0, \\\n    514.0, \\\n    296.0, \\\n    573.0, \\\n    339.0, \\\n    587.0, \\\n    159.0, \\\n    509.0, \\\n    241.0, \\\n    573.0, \\\n    341.0, \\\n    583.0, \\\n    159.0, \\\n    570.0, \\\n    235.0, \\\n    573.0, \\\n    342.0, \\\n    585.0, \\\n    162.0, \\\n    616.0, \\\n    238.0, \\\n    718.0, \\\n    238.0, \\\n    673.0, \\\n    238.0, \\\n    622.0, \\\n    239.0, \\\n    745.0, \\\n    292.0, \\\n    587.0, \\\n    159.0, \\\n    566.0, \\\n    240.0, \\\n    829.0, \\\n    194.0, \\\n    829.0, \\\n    194.0, \\\n    650.0, \\\n    299.0, \\\n    585.0, \\\n    157.0, \\\n    515.0, \\\n    238.0, \\\n    741.0, \\\n    237.0, \\\n    680.0, \\\n    236.0, \\\n    584.0, \\\n    156.0, \\\n    790.0, \\\n    205.0\\\n  );\\\n  return table.concat(tester)\\\n)}'\n\nkey.x()\nkey.p()\n\n:global int inc\n:local vector point\n\ngotoif(skip, contains(impulse(), \"key.p\"))\ncanvas.clear()\n\nskip:\npoint = vec(\\\n  s2d(sub(coords, inc, 5), 0.0), \\\n  s2d(sub(coords, inc + 5, 5), 0.0)\\\n)\ninc = inc + 10\ncanvas.rect(point, vec(5.0, 5.0), \"#000\")\n\n"],["BigManx4X","#name BigManx4X\n#name.reverse {lua(return string.reverse(\"{name}\"))}\n; name of the script\n\n:name {name}\n:budget_cap 201\n; we use the budget here to prevent\n; a race condition from going through\n; \n; if 2 instances are set to start\n\n#inv_fill m\n\n#start x\n#gift_up p\n#gift_down o\n\n#config c\n#up t\n#down g\n#left f\n#right h\n\n\nwakeup()\n\nkey.{inv_fill}()\n\nkey.{start}()\nkey.{gift_up}()\nkey.{gift_down}()\n\nkey.{config}()\nkey.{up}()\nkey.{down}()\nkey.{left}()\nkey.{right}()\n\n\n:const string gift_name '<size=0>gift coord'\n\n:const double gift_slot_1 460.0\n:const double gift_slot_2 580.0\n:const double gift_slot_3 700.0\n:const double gift_coord_y 300.0\n\n:const double gift_slot_increment 120.0\n; These are the values related to gift slots\n; \n\n:const double rebuy_slot_1 565.0\n:const double rebuy_slot_2 695.0\n:const double rebuy_coord_y 250.0\n\n:const double rebuy_slot_increment 100.0\n; These are the values related to the rebuy slots\n; \n\n:const double combine_slot_1 405.0\n:const double combine_slot_2 470.0\n:const double combine_slot_3 535.0\n\n:const double combine_slot_result 600.0\n; The combine slots\n\n:const double combine_button 680.0\n; The combine button\n\n:const double combine_coord_y 180.0\n; The y coord of every element related to combine\n\n:const double combine_slot_increment 65.0\n; These are values related to the combine slots\n; \n\n:const double inv_coord_x 404.0\n:const double inv_coord_y 115.0\n\n:const double inv_slot_offset 29.75\n#inv_point_to_corner vec(13.5, 13.5)\n\n:const double inv_border_size 25.0\n:const double inv_slot_size 23.0\n\n:const string target_color '#0F6'\n; These are values related to the selection square\n\n\n:local vector buyer\n:local double combine_coord\n\n:global double inventory\n:local vector inv_slot\n\n:global bool config\n\n:local string target.gift\n:local string gift_info\n:global string buy_gift\n\n; helper macro to detect if an impulse\n; is contained inside of the string <str>\n\n#contains.key(key) contains(impulse(), \"key.{key}\")\n\n; macros and const values for impulse groups\n\n:const string inv_fill 'key.{inv_fill}{name}'\n:const string in_config 'key.{config}wakeup'\n:const string no_config 'key.{start}key.{inv_fill}'\n#actions no_config . \"key.{config}wakeup{name}\"\n#filler \"key.{up}key.{down}key.{right}key.{gift_up}key.{gift_down}\" . \\\n  in_config\n\nglobal.double.set(gift_name, min(2.0, max(0.0, if(\\\n  contains({actions}, impulse()) || config,\\\n  global.double.get(gift_name),\\\n  if(\\\n    {contains.key({gift_down})},\\\n    global.double.get(gift_name) + 1.0, \\\n    global.double.get(gift_name) - 1.0\\\n  )\\\n))))\n\nbuyer = vec(\\\n  gift_slot_3 - gift_slot_increment * global.double.get(gift_name), \\\n  gift_coord_y\\\n)\n\nconfig = contains(in_config, impulse()) != (config && contains({filler}, impulse()))\n\n; we perform a substring to get our modification\n; key. = 4 => sub(impulse(), 4, 1) to get our keypress\n; key.{up} = inventory - 12.0\n; key.{down} = inventory + 12.0\n; key.{left} = inventroy - 1\n; key.{right} = inventory + 1\n\n:const string inv_str \"-12.0+12.0-1.00+1.00\"\n:const string inv_keys \"{up}{down}{left}{right}{config}{gift_up}{gift_down}\"\ninventory = if(\\\n  contains(impulse(), \"wakeup\"), \\\n  36.0, \\\n  max(0.0, min(47.0, inventory + s2d(\\\n    sub(\\\n      inv_str, \\\n      if(config, 5 * index(inv_keys, sub(impulse(), 4, 1), 0), 2), \\\n      5\\\n    ), \\\n    0.0\\\n  )))\\\n)\n\ninv_slot = vec(\\\n  inv_coord_x + inv_slot_offset * ((inventory) % 12.0),\\\n  inv_coord_y - inv_slot_offset * floor(inventory / 12.0)\\\n)\n\ntarget.gift = if(x(buyer) == gift_slot_1, \"red gift\", if(\\\n  x(buyer) == gift_slot_2, \\\n  \"green gift\", \\\n  \"blue gift\"\\\n))\n\ngift_info = if(\\\n  not(contains(impulse(), \"wakeup\")) && (config && contains(buy_gift, \"<br>\")) ||\\\n  (contains(in_config, impulse()) && config || contains(no_config, impulse())), \\\n  if(\\\n    config, \\\n    \"<br><mark=#00000050>\" . \\\n      \"config enabled, press \" . \\\n      \"<color=\" . target_color . \">{start}/{config}</color>\" . \\\n      \" to <color=red>stop</color>\" . \\\n      \"<br>\" .\\\n      \"<color=\" . target_color . \">{up}/{down}</color>\" . \\\n      \" to change row\" . \\\n      \"<br>\" . \\\n      \"<color=\" . target_color . \">{left}/{right}</color>\" . \\\n      \" to change inv slot\" .\\\n    \"</mark>\", \\\n    \"<br>combining with <color=#000>\" . target.gift . \"</color>\"\\\n  ),\\\n  \"\"\\\n)\n\nbuy_gift = \"</size>script will buy \" . target.gift . gift_info\n\ngotoif(config_sequence, contains({filler}, impulse()))\n\nbuy_sequence:\n\n:local int buy\n:local int combine\n:local int rebuy\n\nbuy_loop:\n\n; because we'll only ever be rebuying on the last combine\n; we'll change the buyer to represent the rebuy_coord instead\n; of buying a new gift\n; \n; by making this change, we'll also be able to use this loop\n; for the final combine instead of making a new loop at the end\n; \n; This is an arithmetical change\n; if rebuy is 0, we will never decrease buyer\n; but when rebuy grows to 1, we will only buy\n; the newest gift sold once buy = 2, aka the final rebuy\nbuyer = buyer - vec(\\\n  rebuy_slot_increment * floor(i2d(rebuy * buy / 2)), \\\n  0.0\\\n)\\\n\n; we also change the location of our combine coord\n; if buy == 0, this returns combine_slot_1\ncombine_coord = if(\\\n  rebuy == 0,\\\n  combine_slot_1 + (combine_slot_increment * i2d(buy)), \\\n  combine_slot_3 - (combine_slot_increment * i2d(buy))\\\n)\n\n{click.relative(x(buyer) / 800.0, y(buyer) / 450.0, 1.0, 0.5)}\n; buy selected gift\n\n{click.relative(x(inv_slot) / 800.0, y(inv_slot) / 450.0, 1.0, 0.5)}\n; click on the inventory slot\n\nfinal_combine:\n{click.relative(combine_coord / 800.0, 180.0 / 450.0, 1.0, 0.5)}\n; put it in combine slot\n\n; increment our buy count\n; this keeps track of how many items we have bought\nbuy = (buy + 1) % 3\n\ngotoif(buy_loop, buy > 0)\n\n{click.relative(680.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}\n; we click the button to combine the input\n\n{click.relative(600.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}\n; we take the output outsode of our combine slot \n\n; we want to sell every gift appart from the last one\ngotoif(no_sell, combine == 2 || rebuy == 1)\n\n{click.relative(410.0 / 800.0, rebuy_coord_y / 450.0, 1.0, 0.5)}\n; and we sell it to make space for the next combine sequence\n\nno_sell:\n; we've got 3 combines and a final combine\n; this counter keeps track of our combines\ncombine = (combine + 1) % 3\n\n; this makes sure to never set rebuy back to 0\n; this works because the default value of an int is 0\nrebuy = max(rebuy, 1 - combine)\n\n; and this ensures buyer becomes rebuy_slot_2 only when\n; we're doing the final combine\nbuyer = if(rebuy == 0, buyer, vec(rebuy_slot_2, rebuy_coord_y))\n\n\n; this gotoif() ensures we exit after the final comine\ngotoif(if(rebuy == 0, buy_loop, final_combine), rebuy - combine != 0)\n\nend:\n\n; end the combine sequence\n\n{click.relative(x(inv_slot) / 800.0, y(inv_slot) / 450.0, 1.0, 0.5)}\n; buy back the last bought present\n\n{click.relative(735.0 / 800.0, 140.0 / 450.0, 1.0, 0.5)}\n; and unwrap all presents\n\n; finally, we tell the user that the script has finished\n; so we remove our information text\n\nbuy_gift = \"</size>script will buy \" . target.gift\n\ninventory = inventory + 1.0\n\nexecute(if(\\\n  contains(inv_fill, impulse()) && inventory < 48.0, \\\n  \"{name}\", \\\n  \"{name}4{name.reverse}\"\\\n))\n\nconfig_sequence:\n\ninv_slot = vec(\\\n  inv_coord_x + inv_slot_offset * ((inventory) % 12.0),\\\n  inv_coord_y - inv_slot_offset * floor(inventory / 12.0)\\\n) - {inv_point_to_corner}\n\ncanvas.clear()\ncanvas.rect(\\\n  {pos.relative(x(inv_slot) / 800.0, y(inv_slot) / 450.0, 1.0, 0.5)}, \\\n  {pos.relative(inv_border_size / 800.0, inv_border_size / 450.0, 0.0, 0.0)}, \\\n  \"#000\"\\\n)\ncanvas.rect(\\\n  {pos.relative((x(inv_slot) + 1.0) / 800.0, (y(inv_slot) + 1.0) / 450.0, 1.0, 0.5)}, \\\n  {pos.relative(inv_slot_size / 800.0, inv_slot_size / 450.0, 0.0, 0.0)}, \\\n  target_color . \"5\"\\\n)\n\n"],["bigman noconfig",":name bigman4X (no-config)\n\n:budget_cap 1\n; we use the budget here to prevent\n; a race condition from going through\n; \n; if 2 instances are set to start\n\n#start x\n#gift_up p\n#gift_down o\n\nkey.{start}()\nkey.{gift_up}()\nkey.{gift_down}()\n\n\n:const string gift_name '<size=0>gift coord'\n\n:const double gift_slot_1 460.0\n:const double gift_slot_2 580.0\n:const double gift_slot_3 700.0\n:const double gift_coord_y 300.0\n\n:const double gift_slot_increment 120.0\n; These are the values related to gift slots\n; \n\n:const double rebuy_slot_1 565.0\n:const double rebuy_slot_2 695.0\n:const double rebuy_coord_y 250.0\n\n:const double rebuy_slot_increment 100.0\n; These are the values related to the rebuy slots\n; \n\n:const double combine_slot_1 405.0\n:const double combine_slot_2 470.0\n:const double combine_slot_3 535.0\n\n:const double combine_slot_result 600.0\n; The combine slots\n\n:const double combine_button 680.0\n; The combine button\n\n:const double combine_coord_y 180.0\n; The y coord of every element related to combine\n\n:const double combine_slot_increment 65.0\n; These are values related to the combine slots\n; \n\n:const double inv_coord_x 404.0\n:const double inv_coord_y 115.0\n\n:const double inv_slot_offset 29.75\n#inv_point_to_corner vec(13.5, 13.5)\n\n:const double inv_border_size 25.0\n:const double inv_slot_size 23.0\n\n:const string target_color '#0F6'\n; These are values related to the selection square\n\n\n:local vector buyer\n:local double combine_coord\n\n:local double inventory\n:local vector inv_slot\n\n:local string target.gift\n:local string gift_info\n:global string buy_gift\n\n; helper macro to detect if an impulse\n; is contained inside of the string <str>\n\n#contains.key(key) contains(impulse(), \"key.{key}\")\n\n; const values for impulse groups\n:const string actions 'key.{start}'\n\nglobal.double.set(gift_name, min(2.0, max(0.0, if(\\\n  contains(actions, impulse()),\\\n  global.double.get(gift_name),\\\n  if(\\\n    {contains.key({gift_down})},\\\n    global.double.get(gift_name) + 1.0, \\\n    global.double.get(gift_name) - 1.0\\\n  )\\\n))))\n\nbuyer = vec(\\\n  gift_slot_3 - gift_slot_increment * global.double.get(gift_name), \\\n  gift_coord_y\\\n)\n\ntarget.gift = if(x(buyer) == gift_slot_1, \"red gift\", if(\\\n  x(buyer) == gift_slot_2, \\\n  \"green gift\", \\\n  \"blue gift\"\\\n))\n\ngift_info = if(\\\n  contains(buy_gift, \"<br>\") || {contains.key({start})}, \\\n  \"<br>combining with <color=#000>\" . target.gift . \"</color>\",\\\n  \"\"\\\n)\n\nbuy_gift = \"</size>script will buy \" . target.gift . gift_info\n\ngotoif(99, not({contains.key({start})}))\n\nfind_slot:\n\n:local double candy\n\ncandy = resource(\"christmas.candy\")\n\ninv_slot = vec(\\\n  inv_coord_x + inv_slot_offset * ((inventory) % 12.0),\\\n  inv_coord_y - inv_slot_offset * floor(inventory / 12.0)\\\n)\n; set inv_slot to our new slot\n\n{click.relative(x(inv_slot) / 800.0, y(inv_slot) / 450.0, 1.0, 0.5)}\n; click on the inventory slot\nwaitframe()\n{click.relative(410.0 / 800.0, rebuy_coord_y / 450.0, 1.0, 0.5)}\n; and we sell it to check if our candy cane count has changed\n\n; and if we didn't sell anything, we've reached an empty slot\ngotoif(buy_loop, resource(\"christmas.candy\") != candy)\n\nwaitframe()\n\n; otherwise, we continue to rebuy the last sold item\n{click.relative(rebuy_slot_1 / 800.0, rebuy_coord_y / 450.0, 1.0, 0.5)}\n\n; and incrementing inventory to check the next slot\n; as rebuying automatically places the sold item in our inventory\n; and items in the inventory fallover from slot 2 to 1\n\ninventory = inventory + 1.0\n\n; and wait a frame to prevent the game from clicking too fast\nwaitframe()\ngoto(find_slot)\n\n\nbuy_sequence:\n\n:local int buy\n:local int combine\n:local int rebuy\n\nbuy_loop:\n\n; because we'll only ever be rebuying on the last combine\n; we'll change the buyer to represent the rebuy_coord instead\n; of buying a new gift\n; \n; by making this change, we'll also be able to use this loop\n; for the final combine instead of making a new loop at the end\n; \n; This is an arithmetical change\n; if rebuy is 0, we will never decrease buyer\n; but when rebuy grows to 1, we will only buy\n; the newest gift sold once buy = 2, aka the final rebuy\nbuyer = buyer - vec(\\\n  rebuy_slot_increment * floor(i2d(rebuy * buy / 2)), \\\n  0.0\\\n)\\\n\n; we also change the location of our combine coord\n; if buy == 0, this returns combine_slot_1\ncombine_coord = if(\\\n  rebuy == 0,\\\n  combine_slot_1 + (combine_slot_increment * i2d(buy)), \\\n  combine_slot_3 - (combine_slot_increment * i2d(buy))\\\n)\n\n{click.relative(x(buyer) / 800.0, y(buyer) / 450.0, 1.0, 0.5)}\n; buy selected gift\n\n{click.relative(x(inv_slot) / 800.0, y(inv_slot) / 450.0, 1.0, 0.5)}\n; click on the inventory slot\n\nfinal_combine:\n{click.relative(combine_coord / 800.0, 180.0 / 450.0, 1.0, 0.5)}\n; put it in combine slot\n\n; increment our buy count\n; this keeps track of how many items we have bought\nbuy = (buy + 1) % 3\n\ngotoif(buy_loop, buy > 0)\n\n{click.relative(680.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}\n; we click the button to combine the input\n\n{click.relative(600.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}\n; we take the output outsode of our combine slot \n\n; we want to sell every gift appart from the last one\ngotoif(no_sell, combine == 2 || rebuy == 1)\n\n{click.relative(410.0 / 800.0, rebuy_coord_y / 450.0, 1.0, 0.5)}\n; and we sell it to make space for the next combine sequence\n\nno_sell:\n; we've got 3 combines and a final combine\n; this counter keeps track of our combines\ncombine = (combine + 1) % 3\n\n; this makes sure to never set rebuy back to 0\n; this works because the default value of an int is 0\nrebuy = max(rebuy, 1 - combine)\n\n; and this ensures buyer becomes rebuy_slot_2 only when\n; we're doing the final combine\nbuyer = if(rebuy == 0, buyer, vec(rebuy_slot_2, rebuy_coord_y))\n\n\n; this gotoif() ensures we exit after the final comine\ngotoif(if(rebuy == 0, buy_loop, final_combine), rebuy - combine != 0)\n\nend:\n\n; end the combine sequence\n\n{click.relative(x(inv_slot) / 800.0, y(inv_slot) / 450.0, 1.0, 0.5)}\n; buy back the last bought present\n\n{click.relative(735.0 / 800.0, 140.0 / 450.0, 1.0, 0.5)}\n; and unwrap all presents\n\n; finally, we tell the user that the script has finished\n; so we remove our information text\n\nbuy_gift = \"</size>script will buy \" . target.gift\n\n"],["Winter Wonderland vectors","\nclick(vec(460.0, 302.0)) ; buy gift 1\n; {pos.relative(460.0 / 800.0, 300.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(590.0, 302.0)) ; buy gift 2\n; {pos.relative(580.0 / 800.0, 300.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(710.0, 302.0)) ; buy gift 3\n; {pos.relative(700.0 / 800.0, 300.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(734.0, 141.0)) ; unbox all\n; {pos.relative(735.0 / 800.0, 140.0 / 450.0, 1.0, 0.5)}\n\n; row ---\n; columm\n; |\n; |\n; |\n\nclick(vec(402.0, 084.0)) ; inv slot 01 row 2\n; {pos.relative(400.0 / 800.0, 085.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(403.0, 117.0)) ; inv slot 01 row 1\n; {pos.relative(400.0 / 800.0, 115.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(432.0, 117.0)) ; inv slot 02 row 1\n; {pos.relative(430.0 / 800.0, 115.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(731.0, 112.0)) ; inv slot 12 row 1\n; {pos.relative(730.0 / 800.0, 115.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(405.0, 179.0)) ; Combine slot 1\n; {pos.relative(405.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(470.0, 178.0)) ; Combine slot 2\n; {pos.relative(470.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(536.0, 178.0)) ; Combine slot 3\n; {pos.relative(535.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(600.0, 179.0)) ; Combine slot result\n; {pos.relative(600.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(677.0, 179.0)) ; Combine button buy\n; {pos.relative(680.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(408.0, 248.0)) ; Sell slot\n; {pos.relative(410.0 / 800.0, 250.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(565.0, 252.0)) ; Rebuy slot 1\n; {pos.relative(565.0 / 800.0, 250.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(693.0, 251.0)) ; Rebuy slot 2\n; {pos.relative(695.0 / 800.0, 250.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(785.0, 030.0)) ; Click snowman\n; {pos.relative(785.0 / 800.0, 030.0 / 450.0, 1.0, 1.0)}\n\nclick(vec(389.0, 71.0)) ; bottom left corner of slot 1 row 2\n; {pos.relative(389.0 / 800.0, 070.0 / 450.0, 1.0, 0.5)}\n\nclick(vec(416.0, 96.0)) ; top right corner of slot 1 row 2\n; {pos.relative(415.0 / 800.0, 095.0 / 450.0, 1.0, 0.5)}\n\n; slot size = vec(29.0, 29.0) color = #0F6A"],["instruction maker","\n#open_bracket {\n#closed_bracket }\n\n;{lua(\\\n  local vecs = table.pack(\\\n    \"gift_coord / 800.0, 300.0 / 450.0, 1.0, 0.5\", \\\n    \"735.0 / 800.0, 140.0 / 450.0, 1.0, 0.5\", \\\n    \"490.0 / 800.0, 085.0 / 450.0, 1.0, 0.5\", \\\n    \"combine_coord / 800.0, 180.0 / 450.0, 1.0, 0.5\", \\\n    \"600.0 / 800.0, 180.0 / 450.0, 1.0, 0.5\", \\\n    \"680.0 / 800.0, 180.0 / 450.0, 1.0, 0.5\", \\\n    \"410.0 / 800.0, 250.0 / 450.0, 1.0, 0.5\", \\\n    \"565.0 / 800.0, 250.0 / 450.0, 1.0, 0.5\", \\\n    \"695.0 / 800.0, 250.0 / 450.0, 1.0, 0.5\", \\\n    \"750.0 / 800.0, 030.0 / 450.0, 1.0, 0.5\"\\\n  );\\\n  local actions = table.pack(\\\n    \"buy x\",\\\n    \"unbox\",\\\n    \"inv\",\\\n    \"comb x\", \"comb res\", \"comb buy\", \\\n    \"sell\", \"rebuy 1\", \"rebuy 2\", \\\n    \"snowman\"\\\n  );\\\n  local instr = {};\\\n  for i, word in ipairs(actions) do\\\n    instr[word] = vecs[i];\\\n  end\\\n  \\\n  local instructions = table.pack(\\\n    \"buy x\", \"inv\", \"comb x\",\\\n    \"comb buy\", \"comb res\", \"sell\",\\\n    \"comb x\",\\\n    \"rebuy 2\", \"inv\", \"comb x\",\\\n    \"snowman\", \"snowman\",\\\n    \"rebuy 1\", \"inv\", \"comb x\",\\\n    \"comb buy\", \"comb res\", \"inv\", \"unbox\"\\\n  )\\\n  local printer = {};\\\n  for i, word in ipairs(instructions) do\\\n    printer[1 + #printer] = \"{open_bracket}\";\\\n    printer[1 + #printer] = \"click.relative(\";\\\n    printer[1 + #printer] = instr[word];\\\n    printer[1 + #printer] = \"){closed_bracket}\";\\\n    printer[1 + #printer] = '\\n';\\\n  end\\\n  return table.concat(printer);\\\n)}\n\n"],["check click positions","\nwakeup()\n\ncanvas.rect({pos.relative(460.0 / 800.0, 300.0 / 450.0, 1.0, 0.5)}, vec(5.0, 5.0), \"#000\")\ncanvas.rect({pos.relative(580.0 / 800.0, 300.0 / 450.0, 1.0, 0.5)}, vec(5.0, 5.0), \"#000\")\ncanvas.rect({pos.relative(700.0 / 800.0, 300.0 / 450.0, 1.0, 0.5)}, vec(5.0, 5.0), \"#000\")\ncanvas.rect({pos.relative(735.0 / 800.0, 140.0 / 450.0, 1.0, 0.5)}, vec(5.0, 5.0), \"#000\")\ncanvas.rect({pos.relative(490.0 / 800.0, 085.0 / 450.0, 1.0, 0.5)}, vec(5.0, 5.0), \"#000\")\ncanvas.rect({pos.relative(405.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}, vec(5.0, 5.0), \"#000\")\ncanvas.rect({pos.relative(470.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}, vec(5.0, 5.0), \"#000\")\ncanvas.rect({pos.relative(535.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}, vec(5.0, 5.0), \"#000\")\ncanvas.rect({pos.relative(600.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}, vec(5.0, 5.0), \"#000\")\ncanvas.rect({pos.relative(680.0 / 800.0, 180.0 / 450.0, 1.0, 0.5)}, vec(5.0, 5.0), \"#000\")\ncanvas.rect({pos.relative(410.0 / 800.0, 250.0 / 450.0, 1.0, 0.5)}, vec(5.0, 5.0), \"#000\")\ncanvas.rect({pos.relative(565.0 / 800.0, 250.0 / 450.0, 1.0, 0.5)}, vec(5.0, 5.0), \"#000\")\ncanvas.rect({pos.relative(695.0 / 800.0, 250.0 / 450.0, 1.0, 0.5)}, vec(5.0, 5.0), \"#000\")\ncanvas.rect(\\\n  {pos.relative(389.0 / 800.0, 070.0 / 450.0, 1.0, 0.5)}, \\\n  {pos.relative(029.0 / 800.0, 029.0 / 450.0, 0.0, 0.0)}, \\\n  \"#0F6A\"\\\n)\ncanvas.rect({pos.relative(785.0 / 800.0, 030.0 / 450.0, 1.0, 1.0)}, vec(5.0, 5.0), \"#000\")\n"],["New 8","\nkey.x()\n\n:const string gift_name '<size=0>gift coord'\n\n:const double gift_slot_1 460.0\n:const double gift_slot_2 580.0\n:const double gift_slot_3 700.0\n:const double gift_coord_y 300.0\n\n:const double gift_slot_increment 120.0\n; These are the values related to gift slots\n; \n\n:const double rebuy_slot_1 565.0\n:const double rebuy_slot_2 695.0\n:const double rebuy_coord_y 250.0\n\n:const double rebuy_slot_increment 100.0\n; These are the values related to the rebuy slots\n; \n\n:const double combine_slot_1 405.0\n:const double combine_slot_2 470.0\n:const double combine_slot_3 535.0\n\n:const double combine_slot_result 600.0\n; The combine slots\n\n:const double combine_button 680.0\n; The combine button\n\n:const double combine_coord_y 180.0\n; The y coord of every element related to combine\n\n:const double combine_slot_increment 65.0\n; These are values related to the combine slots\n; \n\n:const double inv_coord_x 404.0\n:const double inv_coord_y 115.0\n\n:const double inv_slot_offset 29.75\n#inv_point_to_corner vec(13.5, 13.5)\n\n:const double inv_border_size 25.0\n:const double inv_slot_size 23.0\n\n:const string target_color '#0F6'\n; These are values related to the selection square\n\n\n:local vector buyer\n:local double combine_coord\n\n:global double inventory\n:local vector inv_slot\n\n:local string target.gift\n:local string gift_info\n:global string buy_gift\n\n\nfind_slot:\n\n:local double candy\n\ncandy = resource(\"christmas.candy\")\n\ninv_slot = vec(\\\n  inv_coord_x + inv_slot_offset * ((inventory) % 12.0),\\\n  inv_coord_y - inv_slot_offset * floor(inventory / 12.0)\\\n)\n; set inv_slot to our new slot\n\n{click.relative(x(inv_slot) / 800.0, y(inv_slot) / 450.0, 1.0, 0.5)}\n; click on the inventory slot\nwaitframe()\n{click.relative(410.0 / 800.0, rebuy_coord_y / 450.0, 1.0, 0.5)}\n; and we sell it to check if our candy cane count has changed\n\n; and if we didn't sell anything, we've reached an empty slot\ngotoif(99, resource(\"christmas.candy\") != candy)\n\nwaitframe()\n\n; otherwise, we continue to rebuy the last sold item\n{click.relative(rebuy_slot_1 / 800.0, rebuy_coord_y / 450.0, 1.0, 0.5)}\n\n; and incrementing inventory to check the next slot\n; as rebuying automatically places the sold item in our inventory\n; and items in the inventory fallover from slot 2 to 1\n\ninventory = inventory + 1.0\n\n; and wait a frame to prevent the game from clicking too fast\nwaitframe()\ngoto(find_slot)\n"]]}}
```

# AI import

```
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
```

# Requirements
- 10 impulses
- 0 conditions
- 33 actions
- 1 script
- budget cap 201

To use this AI, you must be inside of winter wonderland, have the snowman menu open and have enough candy canes to buy and combine 12 gifts.

Keep in mind that the script sells gifts, so activate the combiner only after ensuring you won't regret losing one or both items you've sold.

This script is dependent on the following assumptions:
- Have Dynamic UI scaling off, or else the clicks will not work as expected
- Have the boots.dos software installed, if you don't know what it is, search for it in the faq forum channel on discord
- Clear out the combine slots to prevent unintended cases
- Enter configuration to put the selection slot on your first free inventory slot

## Default state
![bigman4X default UI](./Images/bigman4X%20default%20UI.png)

The script uses a global string to provide you information. This info is hidden until you press one of the scripts impulses.

While neither of the scripts modes are enables, you'll be told what gift will be bought once you start combining.<br>
On startup, the selected gift is `blue gift`, you decrease it by pressing `o` and increase it by pressing `p`.

## The configuration mode
![bigman4X congif UI](./Images/bigman4X%20config%20UI.png)

You use it to select the inventory slot the AI will attempt to use. It is enabled by pressing `c`, where it draws a selection square thanks to functions added by the software `boots.dos` and changes the information string at the top right of your game screen, which tells you what each action does.<br>
You exit configuration mode by pressing `c`, `x` or `m`.

## The combining mode
![bigman4X combining](./Images/bigman4X%20combining.png)

The combining mode is always triggered by pressing `x`, even if you use it to exit configuration. This mode will buy the gift you've got selected, indicated by the name you see in black.

## The Inventory Fill

The inventory fill mode is an altered Combining Mode. This is triggered by pressing `m` and it will re-execute itself until your inventory is full.<br>
The AI doesn't know when this happens, so it'll just perform its combination sequence until it reaches inventory slot 48, which is the build-in last inventory slot the script can access.
