# istowerdead

A script made by woot to provide TowerTesting information while in a run.<br>
Since blueprints are usually quite fragile, removing as much lag as possible is prefered, which is why dynamic rendering is usually used.

Dynamic rendering still updates global values on AI, so this is just a tool to show information about how the blueprint is doing.

# Source Import

Has 3 scripts that're too miscelaneous to merit being put in the repo

```
{"workspaces":{"istowerdead":[["istowerdead",":name istowerdead\n:budget_cap 1\n\n; Since we're working with only atomic functions,\n; we can set the budget_cap to 1 for fast operations\n; \n; right, so, things you could try to add:\n; - kills per second\n; - wave accels/skips/whatever\n; - xp, other resources (idk if this is possible :/)\n; - number/type of era/inf secures\n; - current tower attack speed, health, energy, *etc.*\n\ngame.newround()\n\n:const string info_var \"<size=0>istowerdead info\"\n#info global.string.get(info_var)\n\n:local double fps\n:local double kps\n:local double time\n\n:local int max_str_length\n\n:local int recording_limit\n:local int recordings\n\n:local int enemies\n:local int frames\n\n:local string enem_recs\n:local string fps_recs\n\n; breaking our sequences into multiple macros\n; so that I can both easily modify the contains() that\n; prevents multiple instances from happening\n; \n; We only want 1 instance updating the info_var\n; since on boot up we mostly show garbage values\n\nrecording_limit = 3\n\ngotoif(99, not(contains(\"</size>\", {info})))\n\nloop:\n\ntime = time.unscaled()\nframes = time.frame()\nenemies = enemies()\n\n\nloop.fps:\n\n\n; In order to calculate our framerate,\n; we'll take multiple recordings as we go on\n; on and output the mean of the values combined\n; First calculation is for our fps, so it's as accurate\n; as we can accomplish\n\nglobal.string.set(info_var, \"</size>towertesting is \" . if(\\\n  pause.get(),\\\n  \"paused\",\\\n  \"not paused\"\\\n))\n\n; d2s(infinity()) . \"(\" . \\\n  d2s(floor(infinity() / (10.0 ^ floor(infinity() // 10.0)))) . \\\n  \"E\" .\\\n  d2s(floor(infinity() // 10.0)) .\\\n\")\"\n\n\nwaitframe()\ngotoif(loop, isTowerTesting())\n\nglobal.string.set(info_var, \"</size>\")"],["fps tracker",":name fps tracker\n:budget_cap 1\n\nkey.f()\n\nwaitframe()\nlds(\"frame\", time.unscaled())\ngss(\"fps<size=650%><color=#FFF>\", d2s(round(1.0 / ldg(\"frame\"))) . \"<size=100%></color>\")\ngoto(1)"],["New 2",":name tester with str\n:budget_cap 1\n\nwakeup()\n\n:const int size_offset 2\n\n:local double time\n:local double fps\n\n:local int inc\n:local int frames\n:local int recordings\n:const int str_size 1\n\n:local string str\n:local string str.time\n:local string str.frames\n\nstart:\n\ntime = time.unscaled()\nframes = time.frame()\n\nwaitframe()\n\nstr.time = if(\\\n  contains(\"\", str.time), \\\n  \"\", \\\n  sub(str.time, 1, 1) . sub(i2s(1003 + len(d2s(time.unscaled()))), 1, 3) . d2s(time.unscaled())\\\n)\n\nstr = sub(\\\n  str, \\\n  5 * (recordings - 9), \\\n  999\\\n) . d2s(floor(i2d(time.frame() - frames) * 100.0 / time))\nfps = fps + s2d(sub(str, recordings * 5, 5), 0.0)\n\nrecordings = min(10, 1 + recordings)\ngotoif(skip, recordings < 10)\n\nfps = 0.0\nloop:\ninc = (inc + 1) % 10\n\nfps = fps + s2d(sub(str, 5 * inc, 5), 0.0)\ngotoif(loop, inc > 0)\n\nskip:\nglobal.string.set(\"fps\", d2s(floor(fps * 100.0 / i2d(recordings)) / 100.0))\n\ngoto(start)\n"],["New 1",":name tester\n:budget_cap 1\n\nwakeup()\n\n:local double time\n:local int frames\n\ntime = time.unscaled()\nframes = time.frame()\nwaitframe()\nglobal.string.set(\"fps-test\", d2s(floor(i2d(time.frame() - frames) * 100.0 / time) / 100.0))\ngoto(0)"],["original istowerdead",":name istowerdead\n\n:const string tower_state \"<size=100>tower\"\n\n:global bool lock\n\ngame.newround()\n\nnot(lock)\n\nlock = true\nglobal.unset(tower_state)\n\nloop:\nglobal.string.set(\\\n  \"inf\",\\\n  d2s(infinity()) . (\\\n    \"(\" . \\\n      d2s(floor(infinity() / (10.0 ^ floor(infinity() // 10.0)))) . \"E\" .\\\n      d2s(floor(infinity() // 10.0)) .\\\n    \")\"\\\n  )\\\n)\n\ngotoif(loop, health(false) > 0.0)\nglobal.string.set(tower_state, \"dead</size>\")\nglobal.unset(\"lock\")\ngotoif(99, health(false) > 0.0)\n\nwaitwhile(isTowerTesting())\n\nglobal.unset(tower_state)\nglobal.unset(\"inf\")\n"]]}}
```