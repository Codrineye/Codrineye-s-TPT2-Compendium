LunaWolfClaw is a user that wanted this custom factory manager

They want changes, so this is why I've got it on my repo.

# Import

```
{"workspaces":{"LunaWolfClaw factory":[["Dust Management lib","#package(name) dust management:{name}\n\n"],["Uptier Dust",":import Dust Management lib\n:name {package(UpDust)}\n\n:local double d_MAX_VOLUME ; max amount of ore lumps to be refined at once.\n:local double d_RETAIN_PERCENTAGE ; min amount of the lower ore to keep.\n:local int i_TIER\n\n\nwakeup()\nopen.factory() \n\nisopen(\"factory\")\n\n; Set the maximum amount of ore lumps to process at once\nd_MAX_VOLUME = 1000.0\n; Set the percentage of the lower level dust to keep.\n; (0.00 = 0%, 0.5 = 50%, 1.00 = 100%)\nd_RETAIN_PERCENTAGE = 0.25\n\nreset:\n; Select dust tier to convert.\n; Must have a minimum of 5 units of dust and be at least 4 times\n; the volume of the tier to be converted to.\ni_TIER = if(\\\n  count(\"dust\", 9) > 5.0 && (count(\"dust\", 9) / 4.0) > count(\"dust\", 10), \\\n  9, \\\n  if(\\\n    count(\"dust\", 8) > 5.0 && (count(\"dust\", 8) / 4.0) > count(\"dust\", 9), \\\n    8, \\\n    if(\\\n      count(\"dust\", 7) > 5.0 && ((count(\"dust\", 7) / 4.0) > count(\"dust\", 8)),7, \\\n\t\t if(((count(\"dust\", 6) > 5.0) & ((count(\"dust\", 6) / 4.0) > count(\"dust\", 7))),6, \\\n\t\t if(((count(\"dust\", 5) > 5.0) & ((count(\"dust\", 5) / 4.0) > count(\"dust\", 6))),5, \\\n\t\t if(((count(\"dust\", 4) > 5.0) & ((count(\"dust\", 4) / 4.0) > count(\"dust\", 5))),4, \\\n\t\t if(((count(\"dust\", 3) > 5.0) & ((count(\"dust\", 3) / 4.0) > count(\"dust\", 4))),3, \\\n\t\t if(((count(\"dust\", 2) > 5.0) & ((count(\"dust\", 2) / 4.0) > count(\"dust\", 3))),2, \\\n\t\t if(((count(\"dust\", 1) > 5.0) & ((count(\"dust\", 1) / 4.0) > count(\"dust\", 2))),1, \\\n         0)))))))))\n\ngotoif(end, not(isopen(\"factory\")) || i_TIER == 0)\n\nprocessDust:\n; Craft up to d_MAX_VOLUME ore lumps leaving\n; at least d_RETAIN_PERCENTAGE of the lower tier dust.\ncraft(\"lump\", i_TIER, min(\\\n  min(\\\n    (count(\"dust\", i_TIER) - (count(\"dust\", i_TIER) * d_RETAIN_PERCENTAGE)) / 4.0, \\\n    count(\"dust\", i_TIER + 1)\\\n  ), \\\n  d_MAX_VOLUME\\\n))\n;Put ore lumps into mixer\nproduce(\"lump\", i_TIER, count(\"lump\", i_TIER), \"mixer\")\n\nwaitwhile(active(\"mixer\"))\n\nend:\n; If the factory window is still open, restart script.\ngotoif(reset, isopen(\"factory\"))"],["Crush Ore",":import Dust Management lib\n:name {package(CrushOre)}\n\n:local int i_TIER ; current tier of ore being crushed\n:local double d_MAX_VOLUME ; max ammount of ores to crush in a single action\n:local double d_RETAIN_ORE ; ammount of ore to keep and not crush.\n:local double d_PERCENT_DUST ; percent ammount of dust to have before\n\nwakeup()\nopen.factory()\n\nisopen(\"factory\")\n\n;Settings - Change these values to adjust the script.\n\nd_MAX_VOLUME = 1000.0 ; Set the maximum amount of ore to crush.\nd_RETAIN_ORE = 1000.0 ; Set the minimum amount of ore to save.\nd_PERCENT_DUST = 0.50 ; \n\n; crushing ore gives 2 dust\n; crushing ingot gives 1 dust\n\n{lua(\\\n  function editor_operation(val_left, op_name, val_right)\\\n    return string.format(\"%s %s %s\", val_left, op_name, val_right);\\\n  end\\\n  function editor_if(condition, val_true, val_false)\\\n    return string.format(\"if(%s, %s, %s)\", condition, val_true, val_false);\\\n  end\\\n  function editor_count(item, tier)\\\n    return string.format('count(%s, %s)', item, tier);\\\n  end\\\n  function tier_cond(tier)\\\n    local ore_count = editor_count('\"ore\"', tier);\\\n    local ore_bigger_retainORE = editor_operation(ore_count, \">\", \"d_RETAIN_ORE\");\\\n    local dust_count = editor_count('\"dust\"', tier);\\\n    local half_dust = editor_operation(dust_count, \"/\", \"2.0\");\\\n    local ore_bigger_halfDust = editor_operation(ore_count, \">\", half_dust);\\\n    return editor_operation(ore_bigger_retainORE, \"&&\", ore_bigger_halfDust);\\\n  end\\\n  function i_TIER_builder(index)\\\n    if index == 0 then\\\n      return 0;\\\n    end\\\n    local tier = index;\\\n    local i_TIER_cond = tier_cond(tier);\\\n    local case_true = tier;\\\n    index = index - 1;\\\n    return editor_if(i_TIER_cond, case_true, i_TIER_builder(index));\\\n  end\\\n)}\n\nreset:\n\n; Select the highest ore tier with excess dust.\ni_TIER = {lua(return i_TIER_builder(10))}\n; Skip if no dust to convert\ngotoif(end, not(isopen(\"factory\")) || i_TIER == 0)\n\ncrushOre:\n;Crush as much ore as possible within limits.\nproduce(\\\n  \"ore\", \\\n  i_TIER, \\\n  min(d_MAX_VOLUME, count(\"ore\", i_TIER) - d_RETAIN_ORE), \\\n  \"crusher\"\\\n)\n\nwaitwhile(active(\"crusher\"))\n\nend:\ngotoif(reset, isopen(\"factory\"))\n"]]}}
```
