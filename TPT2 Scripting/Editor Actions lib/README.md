# Editor_actions lib

This is a library for use within the [External AI Editor by d0sboots](https://d0sboots.github.io/perfect-tower/) that holds multiple functions that output the editors syntax. By doing this, you can build complex conditions and ternary expressions fully within lua to better modify/documment what you're building.

This is source import
```
{"workspaces":{"Editor Actions lib":[["Editor_actions lib","; Script that defines multiple helper lua functions\n; that let you easily build and return large expressions\n; by using a lua macro instead of multiple line breaks\n; \n; Building expressions in lua can greately improve script\n; readability and maintinability if used correctly\n; \n\n; \n; For this library, I will take a page out of d0s's book and\n; just write the functions out in a string\n; \n; I'm pretty sure this should make everything easier\n; \n; The library is made to read from the Editor_actions string and\n; create a function that the user can call, that returns\n; the formatted value requested by the syntax\n; \n; Function name is defined first, its name ends at the first instance of\n; an open parenthesis (\n; \n; Function parameters are the contents within the set of\n; (enclosed parenthesies), the match() pattern stops reading when\n; it reaches a closed parenthesis )\n; \n; Function return output is found at the first instance of a\n; quote mark \" and stops reading once it hits a semicolon ;\n; \n; A function sequence ends with a semicolon ;\n{lua(\\\n  function stringify_value(value_to_stringify)\\\n    return string.format('\"%s\"', value_to_stringify);\\\n  end\\\n  function encase_value(value_to_encase)\\\n    return string.format(\"(%s)\", value_to_encase);\\\n  end\\\n  local function create_Editor_functions(actions_string)\\\n    for line in actions_string:gmatch(\"[^;]+\") do\\\n      local name = line:match(\"([^%(]+)\");\\\n      local params = line:match(\"%(([^%)]+)%)\");\\\n      local output = line:match(\"(\\\"[^;]+)\");\\\n      --[[/*\\\n          * We isolate the functions \\\n          * name, parameters and return output\\\n          * using string.match(line, pattern)\\\n          * \\\n          * we only create a global function if none of the\\\n          * fields are nil\\\n         */]]\\\n      if name and params and output then\\\n        --[[/*\\\n            * Since _G holds all lua functions, to\\\n            * avoid overwriting any with our functions\\\n            * such as the math. protocol\\\n            * our new function are called editor_<function name>\\\n            * This is both for safety, as mentioned above and\\\n            * so that the user knows that this function will\\\n            * return editor syntax\\\n           */]]\\\n        local func_name = string.format(\"editor_%s\", name);\\\n        local func_body = string.format(\\\n          [[return function(%s) return string.format(%s, %s) end]],\\\n          params, output, params\\\n        );\\\n        _G[func_name] = load(func_body)();\\\n      end\\\n    end\\\n  end\\\n  \\\n  local Editor_actions = [==[\\\nvarGet(var_type, data_type, var_name) \"%s.%s.get(%s)\";\\\nget_globalVar(data_type, var_name) \"global.%s.get(%s)\";\\\nget_localVar(data_type, var_name) \"local.%s.get(%s)\";\\\n\\\nmath(leftVal, op_name, rightVal) \"%s %s %s\";\\\nprimitive_math(leftVal, op_name, rightVal) \"%s, %s, %s\";\\\n\\\nprimitive_comparison(dataType, leftVal, op_name, rightVal) \\\n\"comparison.%s(%s, %s, %s)\";\\\n\\\nprimitive_arithmetic(dataType, leftVal, op_name, rightVal) \\\n\"arithmetic.%s(%s, %s, %s)\";\\\n\\\nnot(value_to_negate) \"not(%s)\";\\\nif(condition, valueTrue, valueFalse) \"if(%s, %s, %s)\";\\\n\\\ncontains(parent_string, checker_string) \"contains(%s, %s)\";\\\n\\\nlen(string_value) \"len(%s)\";\\\nindex(parent_string, checker_string, string_offset) \"index(%s, %s, %s)\";\\\n\\\nconcat(left_string, right_string) \"concat(%s, %s)\";\\\nsub(parent_string, string_offset, substring_lenght) \"sub(%s, %s, %s)\";\\\n\\\nlower(string_to_manipulate) \"lower(%s)\";\\\nupper(string_to_manipulate) \"upper(%s)\";\\\n\\\nfloor(floor_value) \"floor(%s)\";\\\nceil(ceil_value) \"ceil(%s)\";\\\nround(round_value) \"round(%s)\";\\\n\\\nsin(sin_value) \"sin(%s)\";\\\ncos(cos_value) \"cos(%s)\";\\\ntan(tan_value) \"tan(%s)\";\\\nasin(asin_value) \"asin(%s)\";\\\nacos(acos_value) \"acos(%s)\";\\\natan(atan_value) \"atan(%s)\";\\\natan2(atan2_value) \"atan2(%s)\";\\\n\\\nmin(leftVal, rightVal) \"min(%s, %s)\";\\\nmax(leftVal, rightVal) \"max(%s, %s)\";\\\nrnd(minVal, maxVal) \"rnd(%s, %s)\";\\\n\\\nvector_xCoord(vector_value) \"vec2.x(%s)\";\\\nvector_yCoord(vector_value) \"vec2.y(%s)\";\\\nvec(vector_coord_x, vector_coord_y) \"vec(%s, %s)\";\\\n\\\nconvertDataType(originalType, desiredType, value) \"%s2%s(%s)\";\\\nconvertFromString(desiredType, value, fallback) \"s2%s(%s, %s)\";\\\n\\\nconvertIntToDouble(value) \"i2d(%s)\";\\\nconvertIntToString(value) \"i2s(%s)\";\\\n\\\nconvertDoubleToInt(value) \"d2i(%s)\";\\\nconvertDoubleToString(value) \"d2s(%s)\";\\\n\\\nconvertStringToInt(value, fallback) \"s2i(%s, %s)\";\\\nconvertStringToDouble(value, fallback) \"s2d(%s, %s)\";\\\n\\\nvisibilityGet(windowID) \"visibility.get(%s)\";\\\nchildVisibilityGet(windowID, elementID) \"child.visibility.get(%s, %s)\";\\\n\\\nisopen(roomID) \"isopen(%s)\";\\\nresource(resourceID) \"resource(%s)\";\\\n\\\nsoftwareEnabled(softwareID) \"software.enabled(%s)\";\\\nsoftwareFind(softwareName) \"software.find(%s)\";\\\n\\\ntowerHealth(percentage) \"tower.health(%s)\";\\\ntowerEnergy(percentage) \"tower.energy(%s)\";\\\ntowerShield(percentage) \"tower.shield(%s)\";\\\nmoduleCooldown(module_index) \"tower.module.cooldown(%s)\";\\\n\\\nhighscore(type, region, difficulty) \"highscore.%s(%s, %s)\";\\\nhighscoreWave(region, difficulty) \"highscore.wave(%s, %s)\";\\\nhighscoreEra(region, difficulty) \"highscore.era(%s, %s)\";\\\nhighscoreInfinity(region, difficulty) \"highscore.infinity(%s, %s)\";\\\n\\\ndisableCost(element_name) \"disable.cost(%s)\";\\\nactiveID(active_spell_name) \"active.id(%s)\";\\\n\\\nworkerPaused(workerID) \"worker.paused(%s)\";\\\nworkerGroup(workerID) \"worker.group(%s)\";\\\nworkerName(workerID) \"worker.name(%s)\";\\\nworkerTask(workerID) \"worker.task(%s)\";\\\n\\\nadventureCountEntities(entityType) \"adventure.countEntities(%s)\";\\\nadventureHasItem(item_name) \"adventure.hasItem(%s)\";\\\nadventureIsWall(tile_coords) \"adventure.isWall(%s)\";\\\nadventureIsBomb(tile_coords) \"adventure.isBomb(%s)\";\\\nadventureIsEnemy(tile_coords) \"adventure.isEnemy(%s)\";\\\nadventureIsCompleted(room_coords) \"adventure.isCompleted(%s)\";\\\nadventureEntityType(tile_coords) \"adventure.entityType(%s)\";\\\n\\\nisMachineActive(machine_name) \"active(%s)\";\\\nfactoryCountItems(item_name, tier) \"count(%s, %s)\";\\\nfactoryCountMachineItems(machine_name) \"machine.item.count(%s)\";\\\nfactoryItemInMachine(machine_name) \"machine.item(%s)\";\\\nfactoryFindItem(item_name) \"factory.find(%s)\";\\\n\\\nmarketPreference(stone_element) \"museum.pref(%s)\";\\\nisMarketSlotLocked(stone_index) \"museum.isLocked(%s)\";\\\nmuseumFreeSlots(target_menu) \"museum.freeSlots(%s)\";\\\nmaxStoneTier(element) \"museum.maxTier(%s)\";\\\nslotTier(offerSlot) \"museum.slotTier(%s)\";\\\ntrashTier(trashSlot) \"museum.trashTier(%s)\";\\\nslotElement(offerSlot) \"museum.slotElement(%s)\";\\\ntrashElement(trashSlot) \"museum.trashElement(%s)\";\\\n]==];\\\n  --[[/*\\\n      * To make the create_Editor_functions function\\\n      * work with ease, we replace every instance of ;\\\n      * in our Editor_actions with ;\\n\\\n      * \\\n      * This way, we can easily isolate 1 function\\\n      * definition from another\\\n     */]]\\\n  create_Editor_functions(Editor_actions);\\\n)}"],["Editor_actions lib handbuilt","; Script that defines multiple helper lua functions\n; that let you easily build and return large expressions\n; by using a lua macro instead of multiple line breaks\n; \n; Building expressions in lua can greately improve script\n; readability and maintinability if used correctly\n\n{lua(\\\n  --[[Easy way for the user to encase a value]]\\\n  function value_encase(value)\\\n    return string.format('(%s)', value);\\\n  end\\\n  --[[root var get and its \"children\"]]\\\n  function editor_varGet(var_type, data_type, var_name)\\\n    return string.format('%s.%s.get(%s)', var_type, data_type, var_name);\\\n  end\\\n  \\\n  function editor_get_globalVar(data_type, var_name)\\\n    return editor_varGet(\"global\", data_type, var_name);\\\n  end\\\n  function editor_get_localVar(data_type, var_name)\\\n    return editor_varGet(\"local\", data_type, var_name);\\\n  end\\\n  \\\n  --[[handle most string/bool/arithmetical operations]]\\\n  function editor_math(leftVal, op_name, right_val)\\\n    return string.format(\"%s %s %s\", leftVal, op_name, right_val);\\\n  end\\\n  function editor_prim_math(leftVal, op_name, right_val)\\\n    return string.format('%s, %s, %s', leftVal, op_name, right_val);\\\n  end\\\n  function editor_prim_compare(data_type, leftVal, op_name, rightVal)\\\n    local comparison = editor_prim_math(leftVal, op_name, rightVal);\\\n    return string.format('comparison.%s(%s)', data_type, comparison);\\\n  end\\\n  function editor_prim_arithmetic(dataType, leftVal, op_name, rightVal)\\\n    local arithmetic = editor_prim_math(leftVal, op_name, rightVal);\\\n    return string.format('arithmetic.%s(%s)', dataType, arithmetic);\\\n  end\\\n  function editor_not(value_to_negate)\\\n    return string.format(\"not(%s)\", value_to_negate);\\\n  end\\\n  function editor_if(condition, val_true, val_false)\\\n    local if_contents = table.pack(condition, val_true, val_false);\\\n    local if_statemant = editor_prim_math(table.unpack(if_contents));\\\n    return string.format(\"if(%s)\", if_statemant);\\\n  end\\\n  function editor_contains(parent_string, checker_string)\\\n    local contains = table.pack(parent_string, checker_string);\\\n    return string.format(\"contains(%s, %s)\", table.unpack(contains));\\\n  end\\\n  function editor_len(string_value)\\\n    return string.format(\"len(%s)\", string_value);\\\n  end\\\n  function editor_index(parent_string, checker_string, offset)\\\n    local index = table.pack(parent_string, checker_string, offset);\\\n    return string.format('index(%s, %s, %s)', table.unpack(index));\\\n  end\\\n  function editor_concat(left_string, right_string)\\\n    return string.format('concat(%s, %s)', left_string, right_string)\\\n  end\\\n  function editor_sub(parent_string, offset, length)\\\n    local substring = table.pack(parent_string, offset, length);\\\n    return string.format('sub(%s, %s, %s)', table.unpack(substring));\\\n  end\\\n  function editor_lower(string_to_manipulate)\\\n    return string.format('lower(%s)', string_to_manipulate);\\\n  end\\\n  function editor_upper(string_to_manipulate)\\\n    return string.format('upper(%s)', string_to_manipulate);\\\n  end\\\n  function editor_floor(floor_value)\\\n    return string.format('floor(%s)', floor_value);\\\n  end\\\n  function editor_ceil(ceil_value)\\\n    return string.format('ceil(%s)', ceil_value);\\\n  end\\\n  function editor_round(round_value)\\\n    return string.format('round(%s)', round_value);\\\n  end\\\n  function editor_sin(sin_value)\\\n    return string.format('sin(%s)', sin_value);\\\n  end\\\n  function editor_cos(cos_value)\\\n    return string.format('cos(%s)', cos_value);\\\n  end\\\n  function editor_tan(tan_value)\\\n    return string.format('tan(%s)', tan_value);\\\n  end\\\n  function editor_asin(asin_value)\\\n    return string.format('asin(%s)', asin_value);\\\n  end\\\n  function editor_acos(acos_value)\\\n    return string.format('acos(%s)', acos_value);\\\n  end\\\n  function editor_atan(atan_value)\\\n    return string.format('atan(%s)', atan_value);\\\n  end\\\n  function editor_atan2(atan2_value)\\\n    return string.format('atan2(%s)', atan2_value);\\\n  end\\\n  function editor_min(leftVal, rightVal)\\\n    return string.format('min(%s, %s)', leftVal, rightVal);\\\n  end\\\n  function editor_max(leftVal, rightVal)\\\n    return string.format('max(%s, %s)', leftVal, rightVal);\\\n  end\\\n  function editor_rnd(minVal, maxVal)\\\n    return string.format('rnd(%s, %s)', minVal, maxVal);\\\n  end\\\n  function editor_vector_xCoord(vector_value)\\\n    return string.format('vec2.x(%s)', vector_value);\\\n  end\\\n  function editor_vector_yCoord(vector_value)\\\n    return string.format('vec2.y(%s)', vector_value);\\\n  end\\\n  function editor_vec(vector_coord_x, vector_coord_y)\\\n    local vector = table.pack(vector_coord_x, vector_coord_y);\\\n    return string.format('vec(%s, %s)', table.unpack(vector));\\\n  end\\\n  function editor_convertDataType(originType, desiredType, value)\\\n    return string.format('%s2%s(%s)', originType, desiredType, value);\\\n  end\\\n  function editor_convertFromString(desiredType, value, fallback)\\\n    return string.format('s2%s(%s, %s)', desiredType, value, fallback);\\\n  end\\\n  function editor_convertIntToDouble(value)\\\n    return editor_convertDataType(\"i\", \"d\", value);\\\n  end\\\n  function editor_convertIntToString(value)\\\n    return editor_converDataType(\"i\", \"s\", value);\\\n  end\\\n  function editor_convertDoubleToInt(value)\\\n    return editor_convertDataType(\"d\", \"i\", value);\\\n  end\\\n  function editor_convertDoubleToString(value)\\\n    return editor_convertDataType(\"d\", \"s\", value);\\\n  end\\\n  function editor_convertStringToInt(value, fallback)\\\n    return editor_convertFromString(\"i\", value, fallback);\\\n  end\\\n  function editor_convertStringToDouble(value, fallback)\\\n    return editor_convertFromString(\"d\", value, fallback);\\\n  end\\\n  function editor_visibilityGet(windowID)\\\n    return string.format('visibility.get(%s)', windowID);\\\n  end\\\n  function editor_childVisibilityGet(windowID, elementID);\\\n    local windowStr = 'child.visibility.get(%s, %s)';\\\n    return string.format(windowStr, windowID, elementID);\\\n  end\\\n  function editor_isopen(roomID)\\\n    return string.format('isopen(%s)', roomID);\\\n  end\\\n  function editor_resource(resourceID)\\\n    return string.format('resource(%s)', resourceID);\\\n  end\\\n  function editor_softwareEnabled(softwareID)\\\n    return string.format('software.enabled(%s)', softwareID);\\\n  end\\\n  function editor_softwareFind(softwareName)\\\n    return string.format('software.find(%s)', softwareName);\\\n  end\\\n  function editor_towerHealth(percentage)\\\n    return string.format('tower.health(%s)', percentage);\\\n  end\\\n  function editor_towerEnergy(percentage)\\\n    return string.format('tower.energy(%s)', percentage);\\\n  end\\\n  function editor_towerShield(percentage)\\\n    return string.format('tower.shield(%s)', percentage);\\\n  end\\\n  function editor_moduleCooldown(module_index)\\\n    local cooldown = 'tower.module.cooldown(%s)';\\\n    return string.format(cooldown, module_index);\\\n  end\\\n  function editor_highscoreWave(region, difficulty)\\\n    local highscore = 'highscore.wave(%s, %s)';\\\n    return string.format(highscore, region, difficulty);\\\n  end\\\n  function editor_highscoreEra(region, difficulty)\\\n    local highscore = 'highscore.era(%s, %s)';\\\n    return string.format(highscore, region, difficulty);\\\n  end\\\n  function editor_highscoreInfinity(region, difficulty)\\\n    local highscore = 'highscore.infinity(%s, %s)';\\\n    return string.format(highscore, region, difficulty);\\\n  end\\\n  function editor_disableCost(element_name)\\\n    return string.format('disable.cost(%s)', element_name);\\\n  end\\\n  function editor_activeID(active_spell_name)\\\n    return string.format('active.id(%s)', active_spell_name);\\\n  end\\\n  function editor_workerPaused(workerID)\\\n    return string.format('worker.paused(%s)', workerID);\\\n  end\\\n  function editor_workerGroup(workerID)\\\n    return string.format('worker.group(%s)', workerID);\\\n  end\\\n  function editor_workerName(workerID)\\\n    return string.format('worker.name(%s)', workerID);\\\n  end\\\n  function editor_workerTask(workerID)\\\n    return string.format('worker.task(%s)', workerID);\\\n  end\\\n  function editor_adventureCountEntities(entityType)\\\n    return string.format('adventure.countEntities(%s)', entityType);\\\n  end\\\n  function editor_adventureHasItem(item_name)\\\n    return string.format('adventure.hasItem(%s)', item_name);\\\n  end\\\n  function editor_adventureIsWall(tile_coords)\\\n    return string.format('adventure.isWall(%s)', tile_coords);\\\n  end\\\n  function editor_adventureIsBomb(tile_coords)\\\n    return string.format('adventure.isBomb(%s)', tile_coords);\\\n  end\\\n  function editor_adventureIsEnemy(tile_coords)\\\n    return string.format('adventure.isEnemy(%s)', tile_coords);\\\n  end\\\n  function editor_adventureIsCompleted(room_coords)\\\n    return string.format('adventure.isCompleted(%s)', room_coords);\\\n  end\\\n  function editor_adventureEntityType(tile_coords)\\\n    return string.format('adventure.entityType(%s)', tile_coords);\\\n  end\\\n  function editor_isMachineActive(machine_name)\\\n    return string.format('active(%s)', machine_name)\\\n  end\\\n  function editor_countFactoryItems(item_name, item_tier)\\\n    return string.format('count(%s, %s)', item_name, item_tier);\\\n  end\\\n  function editor_CountItemsInMachine(machine_name)\\\n    return string.format('machine.item.count(%s)', machine_name);\\\n  end\\\n  function editor_factoryItemInMachine(machine_name)\\\n    return string.format('machine.item(%s)', machine_name);\\\n  end\\\n  function editor_findFactoryItem(item_name)\\\n    return string.format('factory.find(%s)', item_name);\\\n  end\\\n  function editor_marketPreference(stone_element)\\\n    return string.format('museum.pref(%s)', stone_element);\\\n  end\\\n  function editor_isMarketSlotLocked(stone_index)\\\n    return string.format('museum.isLocked(%s)', stone_index);\\\n  end\\\n  function editor_museumFreeSlots(target_menu)\\\n    return string.format('museum.freeSlots(%s)', target_menu);\\\n  end\\\n  function editor_maxStoneTier(element)\\\n    return string.format('museum.maxTier(%s)', element);\\\n  end\\\n  function editor_slotTier(offerSlot)\\\n    return string.format('museum.slotTier(%s)', offerSlot);\\\n  end\\\n  function editor_trashTier(trashSlot)\\\n    return string.format('museum.trashTier(%s)', trashSlot);\\\n  end\\\n  function editor_slotElement(offerSlot)\\\n    return string.format('museum.slotElement(%s)', offerSlot);\\\n  end\\\n  function editor_trashElement(trashSlot)\\\n    return string.format('museum.trashElement(%s)', trashSlot);\\\n  end\\\n)}\n"],["Editor_actions lib prototype","; Script that defines multiple helper lua functions\n; that let you easily build and return large expressions\n; by using a lua macro instead of multiple line breaks\n; \n; Building expressions in lua can greately improve script\n; readability and maintinability if used correctly\n\n{lua(\\\n  local actions = {};\\\n  actions.meta = {};\\\n  actions.meta.names = table.pack(\\\n    \"varGet\", \"get_%sVar\",\\\n    \"operation\",\\\n    \"operation_%sPrimitive\",\\\n    \"%s\",\\\n    \"%sString\",\\\n    \"%s\"\\\n  );\\\n  actions.names = table.pack(\\\n    \"varGet\", \"get_%sVar\",\\\n    \"operation\",\\\n    \"operation_%sPrimitive\",\\\n    \"not\", \"if\",\\\n    \"contains\",\\\n    \"len\", \"index\",\\\n    \"concat\", \"sub\",\\\n    \"%sString\",\\\n    \"%s\",\\\n    \"vector_%sCoord\",\\\n    \"vec\",\\\n    \"conversion_%sTO%s\"\\\n  );\\\n  actions.operands = table.pack(\\\n    --[[local/global.data_type.get]] \"%s.%s.get\", \\\n    \\\n    --[[left_arg, op_name, right_arg]] \"%s %s %s\", \\\n    --[[comparison/arithmetic.type]] \"%s.%s\", \\\n    \\\n    --[[bools]] \"not\", \"if\", \\\n    \\\n    --[[strings]]\\\n    \"contains\", \\\n    \"len\", \"index\", \\\n    \"concat\", \"sub\", \\\n    --[[lower/upper]] \"%s\", \\\n    \\\n    --[[floor ceil round sin cos tan asin acos atan atan2]] \"%s\", \\\n    --[[min max rnd]] \"%s\", \\\n    \\\n    --[[vec2.x/y]] \"vec2.%s\", \\\n    \"vec\", \\\n    \\\n    --[[type conversion]] \"%s2%s\", \\\n    \\\n    --[[UI]] \"visibility.get\", \"child.visibility.get\", \\\n    \\\n    --[[Town]] \"isopen\", \"resource\", \\\n    \\\n    --[[.enabled/find]] \"software.%s\", \\\n    --[[.health/energy/shield/module.cooldown]] \"tower.%s\", \\\n    --[[.wave/era/infinity]] \"highscore.%s\", \\\n    \"disable.cost\", \"active.id\", \\\n    \\\n    --[[worker.paused/group/name/task]] \"worker.%s\", \\\n    \\\n    --[[Arcade Adventure]]\\\n    --[[countEntities/hasItem/isWall/Bomb/Enemy/Completed/entityType]]\\\n    \"adventure.%s\", \\\n    \\\n    --[[Factory]]\\\n    \"active\", \\\n    \"count\", \"machine.item.count\", \\\n    \"machine.item\", \"factory.find\", \\\n    \\\n    --[[Museum]]\\\n    --[[pref/isLocked/freeSlots/max slot trash Tier/slot trash Elememt]]\\\n    \"museum.%s\", \\\n    \"tier\", \\\n    \"element\"\\\n  );\\\n  actions.parameter = {};\\\n  actions.parameter.count = table.pack(\\\n    --[[local/global.data_type.get]] 3, \\\n    \\\n    --[[math/bool operations]] 3, \\\n    --[[condition/arithmetic.type]] 4, \\\n    \\\n    --[[not, if]] 1, 3, \\\n    \\\n    --[[contains]] 2, \\\n    --[[len, index]] 1, 3, \\\n    --[[concat, sub]] 2, 3, \\\n    --[[lower/upper]] 2, \\\n    \\\n    --[[floor ceil round sin cos tan asin acos atan atan2]] 2, \\\n    --[[min max rnd]] 3, \\\n    \\\n    --[[vec2.x/y]] 2, \\\n    --[[vec]] 2, \\\n    \\\n    --[[type conversion]] 3, \\\n    \\\n    --[[visibility.get child.visibility.get]] 1, 2, \\\n    --[[isopen, resource]] 1, 1, \\\n    \\\n    --[[software.]] 2, \\\n    --[[tower. highscore.]] 2, 3, \\\n    --[[disable.cost active.id]] 1, 1, \\\n    \\\n    --[[worker.paused/group/name/task]] 2, \\\n    \\\n    --[[Arcade Adventure]]\\\n    --[[adventure.]] 2, \\\n    \\\n    --[[Factory]]\\\n    --[[active]] 1, \\\n    --[[count machine.item.count]] 2, 1, \\\n    --[[machine.item factory.find]] 1, 1, \\\n    \\\n    --[[Museum]]\\\n    --[[museum.]] 2, \\\n    --[[tier]] 2, \\\n    --[[element]] 2\\\n  );\\\n  actions.parameter.names = table.pack(\\\n    --[[local/global.data_type.get]]\\\n    \"var_type\", \"data_type\", \"var_name\", \\\n    --[[math/bool operations]]\\\n    \"left_value\", \"operator_name\", \"right_value\",\\\n    --[[primitive operation]] \"data_type\", \\\n    \\\n    --[[not]] \"value_to_negate\", \\\n    --[[if]] \"condition\", \"value_case_true\", \"value_case_false\",\\\n    \\\n    --[[contains]] \"parent_string\", \"checker_string\",\\\n    --[[len]] \"string_value\", \\\n    --[[index]] \"parent_string\", \"checker_string\", \"offset\",\\\n    --[[concat]] \"left_string\", \"right_string\", \\\n    --[[sub]] \"parent_string\", \"string_offset\", \"substring_length\", \\\n    --[[lower/upper]] \"operation_name\", \"string_to_manipulate\", \\\n    \\\n    --[[floor ceil round sin cos tan asin acos atan atan2]]\\\n    \"math_action_name\", \"action_value\",\\\n    --[[min max rnd]]\\\n    \"math_action_name\", \"left_value\", \"right_value\",\\\n    \\\n    --[[vec2.x/y]] \"vector_to_get_value_from\",\\\n    --[[vec]] \"vector_coord_x\", \"vector_coord_y\",\\\n    \\\n    --[[type conversion]]\\\n    \"type_to_conver_from\", \"type_to_convert_to\", \"value_to_convert\",\\\n    --[[for string to value]] \"fallback_value\",\\\n    \\\n    --[[visibility.get]] \"window_ID\",\\\n    --[[child.visibility.get]] \"window_ID\", \"element_ID\",\\\n    \\\n    --[[isopen]] \"roomID\",\\\n    --[[resource]] \"resourceID\",\\\n    \\\n    --[[software.]] \"operation_name\", \"software_operation_value\",\\\n    --[[tower.]] \"tower_stat\", \"tower_stat_parameter\",\\\n    --[[highscore.]] \"highscore_target\", \"region\", \"difficulty\",\\\n    --[[disable.cost]] \"element_name\",\\\n    --[[active.id]] \"active_spell_name\",\\\n    \\\n    --[[worker.]] \"worker_operation\", \"worker_ID\",\\\n    --[[adventure.]] \"adventure_operation\", \"operation_request\",\\\n    \\\n    --[[active]] \"machine_name\",\\\n    --[[count]] \"item_name\", \"item_tier\",\\\n    --[[machine.item.count]] \"machine_name\",\\\n    --[[machine.item]] \"machine_name\",\\\n    --[[factory.find]] \"item_name\",\\\n    \\\n    --[[museum.]] \"museum_operation\", \"stone_index\",\\\n    --[[tier]] \"target_menu\", \"target_slot\",\\\n    --[[element]] \"target_menu\", \"target_slot\"\\\n  );\\\n  --[[/*\\\n      * We define types as already-known values\\\n      * For instance, local/global.data_type.get is\\\n      * defined as 2, 0, 0\\\n      * 2 is for local/global\\\n      * 0 is for the data_types\\\n      * 0 is for the name\\\n      * since names and data_types not already-known values,\\\n      * we set them to 0\\\n     */]]\\\n  actions.parameter.types = {};\\\n  actions.parameter.types.count = table.pack(\\\n    --[[local/global.data_type.get]] 2, 0, 0,\\\n    --[[math/bool operations]] 0, 0, 0,\\\n    --[[comparison/arithmetic primitives]] 2,\\\n    \\\n    --[[not/if]] 0, 0, 0, 0,\\\n    \\\n    --[[contains]] 0, 0,\\\n    --[[len/index]] 0, 0, 0, 0,\\\n    --[[concat/sub]] 0, 0, 0, 0, 0,\\\n    --[[lower/upper]] 2, 0,\\\n    \\\n    --[[floor ceil round sin cos tan asin acos atan atan2]]\\\n    10, 0,\\\n    --[[min max rnd]]\\\n    3, 0, 0,\\\n    \\\n    --[[vec2.x/y]] 2,\\\n    --[[vec]] 0, 0,\\\n    \\\n    --[[type conversion]]\\\n    3, 3, 0,\\\n    --[[for string to value]] 0,\\\n    \\\n    --[[visibility.get]] 0,\\\n    --[[child.visibility.get]] 0, 0,\\\n    \\\n    --[[isopen]] 0,\\\n    --[[resource]] 0,\\\n    \\\n    --[[software.]] 2, 0,\\\n    --[[tower.]] 4, 0,\\\n    --[[highscore.]] 3, 0, 0,\\\n    --[[disable.cost]] 0,\\\n    --[[active.id]] 0,\\\n    \\\n    --[[worker.]] 4, 0,\\\n    --[[adventure.]] 7, 0,\\\n    \\\n    --[[active]] 0,\\\n    --[[count]] 0, 0,\\\n    --[[machine.item.count]] 0,\\\n    --[[machine.item]] 0,\\\n    --[[factory.find]] 0,\\\n    \\\n    --[[museum.]] 8, 0,\\\n    --[[tier]] 0, 0,\\\n    --[[element]] 0, 0\\\n  );\\\n  actions.parameter.types.names = table.pack(\\\n    --[[variable types]] \"local\", \"global\",\\\n    \\\n    --[[primitives]] \"comparison\", \"arithmetic\",\\\n    \"upper\", \"lower\",\\\n    \\\n    \"floor\", \"ceil\", \"round\", \\\n    \"sin\", \"cos\", \"tan\", \"asin\", \"acos\", \"atan\", \"atan2\",\\\n    \\\n    \"min\", \"max\", \"rnd\",\\\n    \\\n    --[[vec2.%s()]] \"x\", \"y\",\\\n    \\\n    --[[int/double/string]] \"i\", \"d\", \"s\",\\\n    --[[2]]\\\n    --[[int/double/string]] \"i\", \"d\", \"s\",\\\n    \\\n    --[[software.]] \"enable\", \"find\",\\\n    --[[tower.]] \"health\", \"shield\", \"energy\", \"module.cooldown\",\\\n    --[[highscore]] \"wave\", \"era\", \"infinity\",\\\n    \\\n    --[[worker.]] \"paused\", \"group\", \"name\", \"task\",\\\n    --[[adventure.]] \"countEntities\", \"hasItem\", \\\n    \"isWall\", \"isBomb\", \"isEnemy\", \"isCompleted\", \\\n    \"entityType\",\\\n    \\\n    --[[museum.]] \"pref\", \"isLocked\", \"freeSlots\", \\\n    \"maxTier\", \"slotTier\", \"trashTier\", \\\n    \"slotElement\", \"trashElement\"\\\n  );\\\n)}\n"]]}}
```

## What am I importing?

The source import contains 3 files.
* Editor_actions lib is the main library you should use
* Editor_actions lib handbuilt is a prototypical version of it that can better show what the library does
* Editor_actions lib prototype is a prototypical version of it that's used by me to further improve the library

You should only ever use `:import Editor_actions lib` if you're building with it

## How do I use this?

It might be hard to see how this can be used, so here's an example of an expression taken out of D0S.DustManager.

```
; Nested expressions for calculating the tier of ore to crush. This factors in
; the need to save 1000 ore based on ore_buffer, and returns
; 0 if there is no crushable ore.
#nest2_9(macro, final) {{macro}(2,{{macro}(3,{{macro}(4,{{macro}(5,{{macro}(6,{{macro}(7,{{macro}(8,{{macro}(9,{final})})})})})})})})}
#orecount_cond(value) (count("ore", {value}) <= min(ore_buffer, count("dust", {value})))
#orestate_nest(value, rest) if({orecount_cond(10 - {value})}, {rest}, 10 - {value})
#dust_inc if(active("mixer"), 0, 11)
#orestate if(active("crusher"), {dust_inc}, {orestate_nest(0,{orestate_nest(1,{nest2_9(orestate_nest,{dust_inc})})})})
```

All these macros are in place to calculate the orestate macro.<br>
Writing this in lua makes understanding the code a lot easier.

The downside is that I'm not able to write the macro perfectly as I don't fully understand the purose of all these calculations, but I hope that this shows you how you can use it.

```
{lua(\
  local active = editor_isMachineActive;\
  local function orecount_cond(value)\
    local count = editor_factoryCountItems;\
    local ore_count = count('"ore"', value);\
    local dust_count = count('"dust"', value);\
    local ore_buffer = editor_get_localVar("double", '"ore_buffer"');\
    local min = editor_min(ore_buffer, dust_count);\
    return editor_math(ore_count, "<=", min);\
  end\
  local function orestate_nest(value, rest)\
    local tier = math.tointeger(value);\
    local subtracted_value = editor_math(10, "-", tier);\
    local condition = orecount_cond(subtracted_value);\
    return editor_if(condition, rest, subtracted_value);\
  end\
  local dust_inc = editor_if(active('"mixer"'), 0, 11);\
  local function ore_nest(index, final)\
    if index == 10 then\
      return final;\
    end\
    return orestate_nest(index, ore_nest(index + 1, final));\
  end\
  function orestate()\
    local condition = active('"crusher"');\
    return editor_if(condition, dust_inc, ore_nest(0, dust_inc));\
  end\
)}
```
